<!doctype html>
<html lang="en">
	<head>
		<title>{{ shared.app_info.name }} | Races</title>
		<meta name="description" content="Search for races uploaded by other members." />
		<link rel="canonical" href="{{ shared.app_info.website_url }}" />
		{% include "_partials/meta.html" %} {% include "_partials/scripts.html" %}
	</head>
	<body>
		{% include "_partials/navbar.html" %}
		<main>
			<div class="container">
				<section class="card flex-col">
					<div class="flex items-center justify-between">
						<h1>Upcoming Races</h1>
						{% if let Some(user) = shared.current_user %}
						<button
							class="btn info text-sm"
							hx-get="/upcoming-races/add"
							hx-trigger="click"
							hx-target="#modal"
						>
							Add Race
						</button>
						{% endif %}
					</div>
					<div id="upcoming_race_list" class="flex-col gap-2">
						{% if races.total > 0 %}
						<div class="table-responsive">
							<table>
								<thead>
									<tr>
										<th>Date</th>
										<th>Town</th>
										<th>Name</th>
										<th>Distance</th>
										<th>Website</th>
										<th></th>
									</tr>
								</thead>
								<tbody>
									{% for race in races.items %}
									<tr>
										<td class="nowrap">{{ race.start_at | daydatetime }}</td>
										<td class="nowrap">{{ race.town }}</td>
										<td class="nowrap">{{ race.name | title }}</td>
										<td class="nowrap">{{ race.miles }} Miles</td>
										<td class="nowrap">
											{% if let Some(website) = race.race_url %}
											<a target="_blank" href="{{ website }}" class="nowrap"
												>Visit Race Website</a
											>
											{% endif %}
										</td>
										<td>
											<div class="flex items-center">
												<button
													class="flex items-center"
													style="color: #ff4d70"
												>
													<svg
														xmlns="http://www.w3.org/2000/svg"
														fill="none"
														viewBox="0 0 24 24"
														stroke-width="1.5"
														stroke="currentColor"
														width="18"
														height="18"
													>
														<path
															stroke-linecap="round"
															stroke-linejoin="round"
															d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"
														/>
													</svg>
												</button>
												<button
													class="flex items-center"
													style="color: #ff9717"
												>
													<svg
														xmlns="http://www.w3.org/2000/svg"
														fill="none"
														viewBox="0 0 24 24"
														stroke-width="1.5"
														stroke="currentColor"
														width="18"
														height="18"
													>
														<path
															stroke-linecap="round"
															stroke-linejoin="round"
															d="M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"
														/>
													</svg>
												</button>
											</div>
										</td>
									</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
						<div class="muted text-right text-sm">
							{% if races.total == 1 %} {{ races.total }} upcoming race {% else %} {{
							races.total }} upcoming races {% endif %}
						</div>
						{% else %}
						<p>No upcoming races found.</p>
						{% endif %}
					</div>
				</section>
			</div>
		</main>
		{% include "_partials/footer.html" %}
	</body>
</html>
